PUBLIC FUNC3,FUNC4,FUNC5
EXTERN F2T10:FAR
EXTERN RDAIX:FAR
.386
STACK1	SEGMENT  USE16  STACK
	DB 200 DUP(0)
STACK1	ENDS
DATA 	SEGMENT  USE16  PARA PUBLIC 'DATA'
BUF DB  12 DUP(?)  
N		EQU  3
M		EQU  6
PAI	DW	N DUP(0)   
PAIZ DW N DUP(0)
DATA	ENDS
CODE1   SEGMENT  USE16
       ASSUME   CS:CODE1, DS:DATA, SS:STACK1
FUNC3 PROC	FAR
	PUSH DI
	PUSH EAX
	PUSH EBX
	PUSH ECX
	PUSH EDX
	MOV DI,N
TJD:MOVZX EAX,WORD PTR 11[SI]
    ADD EAX,10
	SAL EAX,7
	MOV EDX,0
	MOVZX EBX,WORD PTR 13[SI]
	DIV EBX
	MOV EBX,0000000AH
	MUL EBX
	MOVZX EBX,BYTE PTR 10[SI]
	MOV EDX,0
	DIV EBX
	MOV ECX,EAX
	MOVZX EAX,WORD PTR 17[SI]
	SAL EAX,6
	MOV EDX,0
	MOVZX EBX,WORD PTR 15[SI]
	ADD EBX,10
	DIV EBX
	ADD EAX,ECX
	MOV 19[SI],AX
  	ADD SI,21
	DEC DI
	CMP DI,0
	JNZ TJD 
	POP EDX
	POP ECX
	POP EBX
	POP EAX
	POP DI
	RET
FUNC3 ENDP
FUNC4	PROC FAR
	PUSH DI
	PUSH AX
	PUSH EBX
	PUSH ECX
	MOV DI,0
LOOP4:	MOV AX,WORD PTR 19[SI]
	MOV PAI[DI],AX
	ADD SI,21
	ADD DI,2
	CMP DI,M
	JNZ LOOP4
	MOV  DI,1
LOOP1:	MOV EBX,1
	MOV ECX,0
	MOV AX,PAI
LOOP2:	CMP AX,PAI[EBX*2]
	JNB NEXT2
NEXT1:	MOV AX,PAI[EBX*2]
	MOV ECX,EBX
NEXT2:	ADD EBX,1
	CMP EBX,N
	JNZ LOOP2
	MOV EBX,ECX
	MOV PAIZ[EBX*2],DI
	MOV PAI[EBX*2],0
	INC DI
	CMP DI,N+1
	JNZ LOOP1
	POP ECX
	POP EBX
	POP AX
	POP DI
	RET
FUNC4 ENDP
;入口参数 
;		  SI 第一个商品的地址
;出口参数 显示所有商品的信息
FUNC5	PROC FAR
	PUSH DI
	PUSH DX
	PUSH BX
	PUSH AX
	MOV DI,0
LOOP5:	
	MOV DX,0AH
	MOV AH,2
	INT 21H
	MOV DX,0DH
	MOV AH,2
	INT 21H
	MOV BX,0
LOOP3:	
	MOV AL,BYTE PTR [BX+SI]
	CMP AL,0
	JZ  K
	MOV DL,AL
	MOV AH,2
	INT 21H
	INC BX
	CMP BX,10
	JNZ LOOP3
K:	MOV DX,' '
	MOV AH,2
	INT 21H
	MOV AL,BYTE PTR 10[SI]
	MOV AH,0
	MOV DX,16
	CALL F2T10
	MOV DL,' '
	MOV AH,2
	INT 21H
	MOV AX,WORD PTR 11[SI]
	ADD AX,10
	MOV DX,16
	CALL F2T10
	MOV DL,' '
	MOV AH,2
	INT 21H
	MOV AX,WORD PTR 13[SI]
	MOV DX,16
	CALL F2T10
	MOV DL,' '
	MOV AH,2
	INT 21H
	MOV AX,WORD PTR 15[SI]
	ADD AX,10
	MOV DX,16
	CALL F2T10
	MOV DL,' '
	MOV AH,2
	INT 21H
	MOV AX,WORD PTR 17[SI]
	MOV DX,16
	CALL F2T10
	MOV DL,' '
	MOV AH,2
	INT 21H
	MOV AX,WORD PTR 19[SI]
	MOV DX,16
	CALL F2T10
	MOV DL,' '
	MOV AH,2
	INT 21H
	MOV AX,PAIZ[DI]
	MOV DX,16
	CALL F2T10
	ADD DI,2
	ADD SI,21
	CMP DI,M
	JNZ LOOP5
	POP AX
	POP BX
	POP DX
	POP DI
	RET
FUNC5 ENDP
CODE1 ENDS
end
